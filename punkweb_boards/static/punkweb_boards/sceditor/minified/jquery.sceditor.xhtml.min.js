/* SCEditor v3.0.0 | (C) 2017, Sam Clarke | sceditor.com/license */

!function(){"use strict";var o=(A=jQuery)&&"object"==typeof A&&"default"in A?A:{default:A};function e(e,t){return typeof t===e}var ye=e.bind(null,"string"),be=e.bind(null,"undefined"),xe=e.bind(null,"function"),r=e.bind(null,"number");function t(e){return!Object.keys(e).length}function we(e,t){for(var n=e===!!e,o=n?2:1,r=n?t:e,i=n&&e;o<arguments.length;o++){var a,l=arguments[o];for(a in l){var c,s,u=l[a];be(u)||(c=null!==u&&"object"==typeof u&&Object.getPrototypeOf(u)===Object.prototype,s=Array.isArray(u),r[a]=i&&(c||s)?we(!0,r[a]||(s?[]:{}),u):u)}}return r}function Te(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Se(t,n){if(Array.isArray(t)||"length"in t&&r(t.length))for(var e=0;e<t.length;e++)n(e,t[e]);else Object.keys(t).forEach(function(e){n(e,t[e])})}var i={},Ce=1,ke=3;function a(e){return e=parseFloat(e),isFinite(e)?e:0}function Ee(e,t,n){var o=(n||document).createElement(e);return Se(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function De(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||Ue(n,t))return n}function Ae(e,t){return Ue(e,t)?e:De(e,t)}function Ne(e){e.parentNode&&e.parentNode.removeChild(e)}function Me(e,t){e.appendChild(t)}function Re(e,t){return e.querySelectorAll(t)}var _e=!0;function Fe(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ye(o)?(t=r["_sce-event-"+e+o]||function(e){for(var t=e.target;t&&t!==n;){if(Ue(t,o))return void r.call(t,e);t=t.parentNode}},r["_sce-event-"+e+o]=t):(t=o,i=r),n.addEventListener(e,t,i||!1)})}function Oe(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ye(o)?t=r["_sce-event-"+e+o]:(t=o,i=r),n.removeEventListener(e,t,i||!1)})}function He(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?ze(e,t):e.setAttribute(t,n)}function ze(e,t){e.removeAttribute(t)}function Le(e){Pe(e,"display","none")}function Ie(e){Pe(e,"display","")}function Be(e){(Qe(e)?Le:Ie)(e)}function Pe(n,e,t){if(arguments.length<3){if(ye(e))return 1===n.nodeType?getComputedStyle(n)[e]:null;Se(e,function(e,t){Pe(n,e,t)})}else{var o=(t||0===t)&&!isNaN(t);n.style[e]=o?t+"px":t}}function je(e,t,n){var o=arguments.length,r={};if(e.nodeType===Ce)return 1===o?(Se(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r):2===o?He(e,"data-"+t):void He(e,"data-"+t,String(n))}function Ue(e,t){var n=!1;return e&&e.nodeType===Ce?(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t):n}function We(e,t){return t.parentNode.insertBefore(e,t)}function l(e){return e.className.trim().split(/\s+/)}function Ve(e,t){return Ue(e,"."+t)}function qe(e,t){var n=l(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function $e(e,t){var n=l(e);Te(n,t),e.className=n.join(" ")}function Ge(e,t,n){((n=be(n)?!Ve(e,t):n)?qe:$e)(e,t)}function Ye(e,t){if(be(t)){var n=a((o=getComputedStyle(e)).paddingLeft)+a(o.paddingRight),o=a(o.borderLeftWidth)+a(o.borderRightWidth);return e.offsetWidth-n-o}Pe(e,"width",t)}function Ke(e,t){if(be(t)){var n=a((o=getComputedStyle(e)).paddingTop)+a(o.paddingBottom),o=a(o.borderTopWidth)+a(o.borderBottomWidth);return e.offsetHeight-n-o}Pe(e,"height",t)}function Xe(e,t,n){var o;xe(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function Qe(e){return e.getClientRects().length}function Ze(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===Ze(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function Je(e,t,n,o){Ze(e,t,n,o,!0)}function et(e,t){var n=(t=t||document).createDocumentFragment(),o=Ee("div",{},t);for(o.innerHTML=e;o.firstChild;)Me(n,o.firstChild);return n}function tt(e){return e&&(!Ue(e,"p,div")||e.className||He(e,"style")||!t(je(e)))}function nt(e,t){var n=Ee(t,{},e.ownerDocument);for(Se(e.attributes,function(e,t){try{He(n,t.name,t.value)}catch(e){}});e.firstChild;)Me(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var c="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|";function ot(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0}function rt(e,t){var n=(e||{}).nodeType||ke;return n!==Ce?n===ke:"code"===(e=e.tagName.toLowerCase())?!t:c.indexOf("|"+e+"|")<0}function s(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)}function it(e){Ze(e,function(e){var t,n,o,r=!rt(e,!0);r&&rt(e.parentNode,!0)&&(t=d(o=function(e){for(;rt(e.parentNode,!0);)e=e.parentNode;return e}(e),e),s(o,n=e),We(t,o),We(n,o)),r&&Ue(e,"ul,ol")&&Ue(e.parentNode,"ul,ol")&&(o="li",r=(r=e).previousElementSibling,(r=o&&r&&!Ue(r,o)?null:r)||We(r=Ee("li"),e),Me(r,e))})}function u(e,t){return e?(t?e.previousSibling:e.nextSibling)||u(e.parentNode,t):null}function at(e){var t,n,o,r,i,a,l=Pe(e,"whiteSpace"),c=/line$/i.test(l),s=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;s;){if(i=s.nextSibling,t=s.nodeValue,(a=s.nodeType)===Ce&&s.firstChild&&at(s),a===ke){for(n=u(s),o=u(s,!0),a=!1;Ve(o,"sceditor-ignore");)o=u(o,!0);if(rt(s)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;Ve(r,"sceditor-ignore");)r=u(r,!0);a=r.nodeType===ke?/[\t\n\r ]$/.test(r.nodeValue):!rt(r)}t=t.replace(/\u200B/g,""),o&&rt(o)&&!a||(t=t.replace(c?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&rt(n)?t:t.replace(c?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?s.nodeValue=t.replace(c?/[\t ]+/g:/[\t\n\r ]+/g," "):Ne(s)}s=i}}function d(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function lt(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function f(e,t){var n=e.style;return i[t]||(i[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=i[t]],"textAlign"===t&&(n=n||Pe(e,t),Pe(e.parentNode,t)===n||"block"!==Pe(e,"display")||Ue(e,"hr,th"))?"":n}var ct={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:He(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,allowedIframeUrls:[],parserOptions:{},dropDownCss:{}},p=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function st(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function ut(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"};return!1!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})}var m={html:'<!DOCTYPE html><html{attrs}><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube-nocookie.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'};function dt(e,t,n){var o=m[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(st("{"+e+"}"),"g"),t[e])}),o=n?et(o):o}function n(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&(/^pre/.test(Pe(n.parentNode,"whiteSpace"))||Ne(n)),n=t}}var ft={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){if(e=e&&3===e.nodeType?e.parentNode:e){var t="ltr"===Pe(e,"direction");return"left"===(e=Pe(e,"textAlign"))||e===(t?"start":"end")}},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){if(e=e&&3===e.nodeType?e.parentNode:e){var t="ltr"===Pe(e,"direction");return"right"===(e=Pe(e,"textAlign"))||e===(t?"end":"start")}},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,e,n){var o=Ee("div");Fe(o,"click","a",function(e){n(je(this,"font")),t.closeDropDown(!0),e.preventDefault()}),t.opts.fonts.split(",").forEach(function(e){Me(o,dt("fontOpt",{font:e},!0))}),t.createDropDown(e,"font-picker",o)},exec:function(e){var t=this;ft.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,e,n){var o=Ee("div");Fe(o,"click","a",function(e){n(je(this,"size")),t.closeDropDown(!0),e.preventDefault()});for(var r=1;r<=7;r++)Me(o,dt("sizeOpt",{size:r},!0));t.createDropDown(e,"fontsize-picker",o)},exec:function(e){var t=this;ft.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,e,n){var o=Ee("div"),r="",i=ft.color;i._htmlCache||(t.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),r+="</div>"}),i._htmlCache=r),Me(o,et(i._htmlCache)),Fe(o,"click","a",function(e){n(je(this,"color")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"color-picker",o)},exec:function(e){var t=this;ft.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=Ee("div"),o=this;Me(n,dt("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),Fe(n,"click",".button",function(e){(t=Re(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){n(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){n(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n;return Ue(t,"li")||Ue(t,"ul,ol,menu")&&(t=(n=this.getRangeHelper().selectedRange()).startContainer.parentNode,n=n.endContainer.parentNode,t!==t.parentNode.firstElementChild||Ue(n,"li")&&n!==n.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),Ae(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return Ae(t,"ul,ol,menu")?0:-1},exec:function(){Ae(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var r=this,i=Ee("div");Me(i,dt("table",{rows:r._("Rows:"),cols:r._("Cols:"),insert:r._("Insert")},!0)),Fe(i,"click",".button",function(e){var t=Number(Re(i,"#rows")[0].value),n=Number(Re(i,"#cols")[0].value),o="<table>";0<t&&0<n&&(o+=Array(t+1).join("<tr>"+Array(n+1).join("<td><br /></td>")+"</tr>"),o+="</table>",r.wysiwygEditorInsertHtml(o),r.closeDropDown(!0),e.preventDefault())}),r.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{_dropDown:function(t,e,n,o){var r=Ee("div");Me(r,dt("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0));var i=Re(r,"#image")[0];i.value=n,Fe(r,"click",".button",function(e){i.value&&o(i.value,Re(r,"#width")[0].value,Re(r,"#height")[0].value),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",r)},exec:function(e){var r=this;ft.image._dropDown(r,e,"",function(e,t,n){var o="";t&&(o+=' width="'+parseInt(t)+'"'),n&&(o+=' height="'+parseInt(n)+'"'),o+=' src="'+ut(e)+'"',r.wysiwygEditorInsertHtml("<img"+o+" />")})},tooltip:"Insert an image"},email:{_dropDown:function(n,e,o){var r=Ee("div");Me(r,dt("email",{label:n._("E-mail:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),Fe(r,"click",".button",function(e){var t=Re(r,"#email")[0].value;t&&o(t,Re(r,"#des")[0].value),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertemail",r)},exec:function(e){var n=this;ft.email._dropDown(n,e,function(e,t){!n.getRangeHelper().selectedHtml()||t?n.wysiwygEditorInsertHtml('<a href="mailto:'+ut(e)+'">'+ut(t||e)+"</a>"):n.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(t,e,n){var o=Ee("div");Me(o,dt("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0));var r=Re(o,"#link")[0];function i(e){r.value&&n(r.value,Re(o,"#des")[0].value),t.closeDropDown(!0),e.preventDefault()}Fe(o,"click",".button",i),Fe(o,"keypress",function(e){13===e.which&&r.value&&i(e)},_e),t.createDropDown(e,"insertlink",o)},exec:function(e){var n=this;ft.link._dropDown(n,e,function(e,t){t||!n.getRangeHelper().selectedHtml()?n.wysiwygEditorInsertHtml('<a href="'+ut(e)+'">'+ut(t||e)+"</a>"):n.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return Ae(this.currentNode(),"a")?0:-1},exec:function(){var e=Ae(this.currentNode(),"a");if(e){for(;e.firstChild;)We(e.firstChild,e);Ne(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",r="</blockquote>";t?(o=o+(n=n?"<cite>"+ut(n)+"</cite>":"")+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r="<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(u){var d=this,f=function(e){var n,t=d.opts,o=t.emoticonsRoot||"",r=t.emoticonsCompat,i=d.getRangeHelper(),a=r&&" "!==i.getOuterText(!0,1)?" ":"",l=r&&" "!==i.getOuterText(!1,1)?" ":"",c=Ee("div"),s=Ee("div"),i=we({},t.emoticons.dropdown,e?t.emoticons.more:{});return Me(c,s),n=Math.sqrt(Object.keys(i).length),Fe(c,"click","img",function(e){d.insert(a+He(this,"alt")+l,null,!1).closeDropDown(!0),e.preventDefault()}),Se(i,function(e,t){Me(s,Ee("img",{src:o+(t.url||t),alt:e,title:t.tooltip||e})),s.children.length>=n&&(s=Ee("div"),Me(c,s))}),!e&&t.emoticons.more&&(Me(t=Ee("a",{className:"sceditor-more"}),document.createTextNode(d._("More"))),Fe(t,"click",function(e){d.createDropDown(u,"more-emoticons",f(!0)),e.preventDefault()}),Me(c,t)),c};d.createDropDown(u,"emoticons",f(!1))},txtExec:function(e){ft.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(r,e,i){var a=Ee("div");Me(a,dt("youtubeMenu",{label:r._("Video URL:"),insert:r._("Insert")},!0)),Fe(a,"click",".button",function(e){var t=(n=Re(a,"#link")[0].value).match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),n=n.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),o=0;n&&Se(n[1].split(/[hms]/),function(e,t){""!==t&&(o=60*o+Number(t))}),t&&/^[a-zA-Z0-9_\-]{11}$/.test(t[1])&&i(t[1],o),r.closeDropDown(!0),e.preventDefault()}),r.createDropDown(e,"insertlink",a)},exec:function(e){var n=this;ft.youtube._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(dt("youtube",{id:e,time:t}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1;return n<2e3&&(n=1900+n),o<10&&(o="0"+o),(t=t.getDate())<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(ft.date._date(this))},txtExec:function(){this.insertText(ft.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+":"+((e=e.getSeconds())<10?"0"+e:e)},exec:function(){this.insertText(ft.time._time())},txtExec:function(){this.insertText(ft.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!Ue(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!Ue(t,"body")))&&(e="ltr"===Pe(t,"direction")?"":"ltr",Pe(t,"direction",e))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!Ue(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!Ue(t,"body")))&&(e="rtl"===Pe(t,"direction")?"":"rtl",Pe(t,"direction",e))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},g={};function pt(i){function a(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function e(e,t){for(var n,o=a((e=[].slice.call(e)).shift()),r=0;r<l.length;r++)if(o in l[r]&&(n=l[r][o].apply(i,e),t))return n}var r=this,l=[];r.call=function(){e(arguments,!1)},r.callOnlyFirst=function(){return e(arguments,!0)},r.hasHandler=function(e){var t=l.length;for(e=a(e);t--;)if(e in l[t])return!0;return!1},r.exists=function(e){return e in g&&"function"==typeof(e=g[e])&&"object"==typeof e.prototype},r.isRegistered=function(e){if(r.exists(e))for(var t=l.length;t--;)if(l[t]instanceof g[e])return!0;return!1},r.register=function(e){return!(!r.exists(e)||r.isRegistered(e)||(e=new g[e],l.push(e),"init"in e&&e.init.call(i),0))},r.deregister=function(e){var t,n=l.length,o=!1;if(!r.isRegistered(e))return o;for(;n--;)l[n]instanceof g[e]&&(o=!0,"destroy"in(t=l.splice(n,1)[0])&&t.destroy.call(i));return o},r.destroy=function(){for(var e=l.length;e--;)"destroy"in l[e]&&l[e].destroy.call(i);l=[],i=null}}pt.plugins=g;var v=function(e,t,n){var o,r,i,a,l,c="",s=e.startContainer,u=e.startOffset;for(s&&3!==s.nodeType&&(s=s.childNodes[u],u=0),i=a=u;n>c.length&&s&&3===s.nodeType;)o=s.nodeValue,r=n-c.length,l&&(a=o.length,i=0),l=s,s=t?(u=i=Math.max(a-r,0),c=o.substr(i,a-i)+c,l.previousSibling):(u=i+(a=Math.min(r,o.length)),c+=o.substr(i,a),l.nextSibling);return{node:l||s,offset:u,text:c}};function mt(r,e,i){var a,o,l=e||r.contentDocument||r.document,c="sceditor-start-marker",s="sceditor-end-marker",h=this;h.insertHTML=function(e,t){var n,o;if(!h.selectedRange())return!1;for(t&&(e+=h.selectedHtml()+t),o=Ee("p",{},l),n=l.createDocumentFragment(),o.innerHTML=i(e);o.firstChild;)Me(n,o.firstChild);h.insertNode(n)},o=function(e,t,n){var o,r=l.createDocumentFragment();if("string"==typeof e?(t&&(e+=h.selectedHtml()+t),r=et(e)):(Me(r,e),t&&(Me(r,h.selectedRange().extractContents()),Me(r,t))),o=r.lastChild){for(;!rt(o.lastChild,!0);)o=o.lastChild;return(ot(o)?o.lastChild||Me(o,document.createTextNode("​")):o=r,h.removeMarkers(),Me(o,a(c)),Me(o,a(s)),n)?(Me(n=Ee("div"),r),n.innerHTML):r}},h.insertNode=function(e,t){var n=o(e,t),t=(e=h.selectedRange()).commonAncestorContainer;if(!n)return!1;e.deleteContents(),t&&3!==t.nodeType&&!ot(t)?We(n,t):e.insertNode(n),h.restoreRange()},h.cloneSelected=function(){var e=h.selectedRange();if(e)return e.cloneRange()},h.selectedRange=function(){var e,t,n=r.getSelection();if(n){if(n.rangeCount<=0){for(t=l.body;t.firstChild;)t=t.firstChild;(e=l.createRange()).setStartBefore(t),n.addRange(e)}return 0<n.rangeCount?n.getRangeAt(0):e}},h.hasSelection=function(){var e=r.getSelection();return e&&0<e.rangeCount},h.selectedHtml=function(){var e,t=h.selectedRange();return t?(Me(e=Ee("p",{},l),t.cloneContents()),e.innerHTML):""},h.parentNode=function(){var e=h.selectedRange();if(e)return e.commonAncestorContainer},h.getFirstBlockParent=function(e){var t=function(e){return rt(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||h.parentNode())},h.insertNodeAt=function(e,t){var n=h.selectedRange(),o=h.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),h.selectRange(n)},a=function(e){return h.removeMarker(e),(e=Ee("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},l)).innerHTML=" ",e},h.insertMarkers=function(){var e=h.selectedRange(),t=a(c);h.removeMarkers(),h.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(a(s),t.nextSibling):h.insertNodeAt(!1,a(s))},h.getMarker=function(e){return l.getElementById(e)},h.removeMarker=function(e){(e=h.getMarker(e))&&Ne(e)},h.removeMarkers=function(){h.removeMarker(c),h.removeMarker(s)},h.saveRange=function(){h.insertMarkers()},h.selectRange=function(e){var t,n=r.getSelection(),o=e.endContainer;if(e.collapsed&&o&&!rt(o,!0)){for(t=o.lastChild;t&&Ue(t,".sceditor-ignore");)t=t.previousSibling;Ue(t,"br")&&((o=l.createRange()).setEndAfter(t),o.collapse(!1),h.compare(e,o)&&(e.setStartBefore(t),e.collapse(!0)))}n&&(h.clear(),n.addRange(e))},h.restoreRange=function(){var e,t=h.selectedRange(),n=h.getMarker(c),o=h.getMarker(s);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=l.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),h.selectRange(t),h.removeMarkers()},h.selectOuterText=function(e,t){var n=h.cloneSelected();if(!n)return!1;n.collapse(!1),e=v(n,!0,e),t=v(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),h.selectRange(n)},h.getOuterText=function(e,t){var n=h.cloneSelected();return n?(n.collapse(!e),v(n,e,t).text):""},h.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,c,s,u,d,f,p="(^|[\\s    ])",m=e.length,g=r?1:0,o=o||e[m-1][0].length;for(r&&o++,i=i||"",s=(a=h.getOuterText(!0,o)).length,a+=i,t&&(a+=h.getOuterText(!1,o));m--;)if(f=(d=e[m][0]).length,c=Math.max(0,s-f-g),u=-1,r?(l=a.substr(c).match(new RegExp(p+st(d)+p)))&&(u=l.index+c+l[1].length):u=a.indexOf(d,c),-1<u&&u<=s&&s<=u+f+g)return u=s-u,h.selectOuterText(u,f-u-(/^\S/.test(i)?1:0)),h.insertHTML(e[m][1]),!0;return!1},h.compare=function(e,t){return t=t||h.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},h.clear=function(){var e=r.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}}var h,y,b,x=navigator.userAgent,gt=/iPhone|iPod|iPad| wosbrowser\//i.test(x),ht=(y=!!window.document.documentMode,E="-ms-ime-align"in document.documentElement.style,(A=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===A.contentEditable&&(A=/Opera Mobi|Opera Mini/i.test(x),/Android/i.test(x)&&(A=!0,/Safari/.test(x)&&(A=!(h=/Safari\/(\d+)/.exec(x))||!h[1]||h[1]<534)),/ Silk\//i.test(x)&&(A=!(h=/AppleWebKit\/(\d+)/.exec(x))||!h[1]||h[1]<534),gt&&(A=/OS [0-4](_\d)+ like Mac/i.test(x)),/Firefox/i.test(x)&&(A=!1),/OneBrowser/i.test(x)&&(A=!1),"UCWEB"===navigator.vendor&&(A=!1),!(A=!(!y&&!E)||A))),w=Object.hasOwnProperty,T=Object.setPrototypeOf,S=Object.isFrozen,C=Object.getPrototypeOf,k=Object.getOwnPropertyDescriptor,vt=Object.freeze,E=Object.seal,D=Object.create,A="undefined"!=typeof Reflect&&Reflect,N=(N=A.apply)||function(e,t,n){return e.apply(t,n)},vt=vt||function(e){return e},E=E||function(e){return e},M=(M=A.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))},yt=R(Array.prototype.forEach),bt=R(Array.prototype.pop),xt=R(Array.prototype.push),wt=R(String.prototype.toLowerCase),Tt=R(String.prototype.match),St=R(String.prototype.replace),Ct=R(String.prototype.indexOf),kt=R(String.prototype.trim),Et=R(RegExp.prototype.test),Dt=(b=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return M(b,t)});function R(r){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return N(r,e,n)}}function At(e,t){T&&T(e,null);for(var n=t.length;n--;){var o,r=t[n];"string"!=typeof r||(o=wt(r))!==r&&(S(t)||(t[n]=o),r=o),e[r]=!0}return e}function Nt(e){var t=D(null),n=void 0;for(n in e)N(w,e,[n])&&(t[n]=e[n]);return t}function Mt(e,t){for(;null!==e;){var n=k(e,t);if(n){if(n.get)return R(n.get);if("function"==typeof n.value)return R(n.value)}e=C(e)}return null}var Rt=vt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_t=vt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ft=vt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ot=vt(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ht=vt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),zt=vt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Lt=vt(["#text"]),It=vt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),Bt=vt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pt=vt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jt=vt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ut=E(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Wt=E(/<%[\s\S]*|[\s\S]*%>/gm),Vt=E(/^data-[\-\w.\u00B7-\uFFFF]/),qt=E(/^aria-[\-\w]+$/),$t=E(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Gt=E(/^(?:\w+script|data):/i),Yt=E(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Xt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Qt=function t(e){function s(e){return t(e)}var l=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;if(s.version="2.2.6",s.removed=[],!l||!l.document||9!==l.document.nodeType)return s.isSupported=!1,s;var c=l.document,i=l.document,u=l.DocumentFragment,n=l.HTMLTemplateElement,d=l.Node,a=l.Element,o=l.NodeFilter,r=l.NamedNodeMap,f=void 0===r?l.NamedNodeMap||l.MozNamedAttrMap:r,p=l.Text,m=l.Comment,g=l.DOMParser,e=l.trustedTypes,h=Mt(r=a.prototype,"cloneNode"),v=Mt(r,"nextSibling"),y=Mt(r,"childNodes"),b=Mt(r,"parentNode");"function"!=typeof n||(n=i.createElement("template")).content&&n.content.ownerDocument&&(i=n.content.ownerDocument);var x=function(e,t){if("object"!==(void 0===e?"undefined":Kt(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix",r="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute(o)?t.currentScript.getAttribute(o):n)?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(e,c),w=x&&ee?x.createHTML(""):"",T=i.implementation,S=i.createNodeIterator,C=i.getElementsByTagName,k=i.createDocumentFragment,E=c.importNode,D={};try{D=Nt(i).documentMode?i.documentMode:{}}catch(e){}var A={};function N(e){se&&se===e||(e=Nt(e=e&&"object"===(void 0===e?"undefined":Kt(e))?e:{}),I="ALLOWED_TAGS"in e?At({},e.ALLOWED_TAGS):B,P="ALLOWED_ATTR"in e?At({},e.ALLOWED_ATTR):j,le="ADD_URI_SAFE_ATTR"in e?At(Nt(ce),e.ADD_URI_SAFE_ATTR):ce,ie="ADD_DATA_URI_TAGS"in e?At(Nt(ae),e.ADD_DATA_URI_TAGS):ae,U="FORBID_TAGS"in e?At({},e.FORBID_TAGS):{},W="FORBID_ATTR"in e?At({},e.FORBID_ATTR):{},M="USE_PROFILES"in e&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,$=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=e.SAFE_FOR_TEMPLATES||!1,Y=e.WHOLE_DOCUMENT||!1,Q=e.RETURN_DOM||!1,Z=e.RETURN_DOM_FRAGMENT||!1,J=!1!==e.RETURN_DOM_IMPORT,ee=e.RETURN_TRUSTED_TYPE||!1,X=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,oe=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||L,G&&(q=!1),Z&&(Q=!0),M&&(I=At({},[].concat(Xt(Lt))),P=[],!0===M.html&&(At(I,Rt),At(P,It)),!0===M.svg&&(At(I,_t),At(P,Bt),At(P,jt)),!0===M.svgFilters&&(At(I,Ft),At(P,Bt),At(P,jt)),!0===M.mathMl&&(At(I,Ht),At(P,Pt),At(P,jt))),e.ADD_TAGS&&At(I=I===B?Nt(I):I,e.ADD_TAGS),e.ADD_ATTR&&At(P=P===j?Nt(P):P,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&At(le,e.ADD_URI_SAFE_ATTR),ne&&(I["#text"]=!0),Y&&At(I,["html","head","body"]),I.table&&(At(I,["tbody"]),delete U.tbody),vt&&vt(e),se=e)}s.isSupported=T&&void 0!==T.createHTMLDocument&&9!==D;var M,R=Ut,_=Wt,F=Vt,O=qt,H=Gt,z=Yt,L=$t,I=null,B=At({},[].concat(Xt(Rt),Xt(_t),Xt(Ft),Xt(Ht),Xt(Lt))),P=null,j=At({},[].concat(Xt(It),Xt(Bt),Xt(Pt),Xt(jt))),U=null,W=null,V=!0,q=!0,$=!1,G=!1,Y=!1,K=!1,X=!1,Q=!1,Z=!1,J=!0,ee=!1,te=!0,ne=!0,oe=!1,re=At({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ie=null,ae=At({},["audio","video","img","source","image","track"]),le=null,ce=At({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),se=null,ue=i.createElement("form"),de=At({},["mi","mo","mn","ms","mtext"]),fe=At({},["foreignobject","desc","title","annotation-xml"]),pe=At({},_t);At(pe,Ft),At(pe,Ot);var me=At({},Ht);function ge(t){xt(s.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=w}catch(e){t.remove()}}}function he(e,t){try{xt(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){xt(s.removed,{attribute:null,from:t})}t.removeAttribute(e)}function ve(e){var t=void 0,n=void 0;X?e="<remove></remove>"+e:n=(o=Tt(e,/^[\r\n\t ]+/))&&o[0];var o,r=x?x.createHTML(e):e;try{t=(new g).parseFromString(r,"text/html")}catch(e){}return t&&t.documentElement||((o=(t=T.createHTMLDocument("")).body).parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=r),e&&n&&t.body.insertBefore(i.createTextNode(n),t.body.childNodes[0]||null),C.call(t,Y?"html":"body")[0]}function ye(e){return S.call(e.ownerDocument||e,e,o.SHOW_ELEMENT|o.SHOW_COMMENT|o.SHOW_TEXT,function(){return o.FILTER_ACCEPT},!1)}function be(e){return"object"===(void 0===d?"undefined":Kt(d))?e instanceof d:e&&"object"===(void 0===e?"undefined":Kt(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function xe(e,t,n){A[e]&&yt(A[e],function(e){e.call(s,t,n,se)})}function we(e){var t;if(xe("beforeSanitizeElements",e,null),!((n=e)instanceof p||n instanceof m||"string"==typeof n.nodeName&&"string"==typeof n.textContent&&"function"==typeof n.removeChild&&n.attributes instanceof f&&"function"==typeof n.removeAttribute&&"function"==typeof n.setAttribute&&"string"==typeof n.namespaceURI&&"function"==typeof n.insertBefore))return ge(e),1;if(Tt(e.nodeName,/[\u0080-\uFFFF]/))return ge(e),1;var n=wt(e.nodeName);if(xe("uponSanitizeElement",e,{tagName:n,allowedTags:I}),!be(e.firstElementChild)&&(!be(e.content)||!be(e.content.firstElementChild))&&Et(/<[/\w]/g,e.innerHTML)&&Et(/<[/\w]/g,e.textContent))return ge(e),1;if(I[n]&&!U[n])return e instanceof a&&!function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:Ee,tagName:"template"});var n=wt(e.tagName),o=wt(t.tagName);return e.namespaceURI===ke?t.namespaceURI===Ee?"svg"===n:t.namespaceURI===Ce?"svg"===n&&("annotation-xml"===o||de[o]):Boolean(pe[n]):e.namespaceURI===Ce?t.namespaceURI===Ee?"math"===n:t.namespaceURI===ke?"math"===n&&fe[o]:Boolean(me[n]):e.namespaceURI===Ee&&(t.namespaceURI!==ke||fe[o])&&(t.namespaceURI!==Ce||de[o])&&(o=At({},["title","style","font","a","script"]),!me[n]&&(o[n]||!pe[n]))}(e)||("noscript"===n||"noembed"===n)&&Et(/<\/no(script|embed)/i,e.innerHTML)?(ge(e),1):(G&&3===e.nodeType&&(t=e.textContent,t=St(t,R," "),t=St(t,_," "),e.textContent!==t&&(xt(s.removed,{element:e.cloneNode()}),e.textContent=t)),xe("afterSanitizeElements",e,null),0);if(ne&&!re[n])for(var o=b(e),r=y(e),i=r.length-1;0<=i;--i)o.insertBefore(h(r[i],!0),v(e));return ge(e),1}function Te(e,t,n){if(te&&("id"===t||"name"===t)&&(n in i||n in ue))return!1;if(!(q&&Et(F,t)||V&&Et(O,t))){if(!P[t]||W[t])return!1;if(!le[t]&&!Et(L,St(n,z,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ct(n,"data:")||!ie[e])&&(!$||Et(H,St(n,z,"")))&&n)return!1}return!0}function Se(e){var t,n=void 0,o=void 0;xe("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){for(var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P},o=r.length;o--;){var a=(t=r[o]).name,l=t.namespaceURI,n=kt(t.value),c=wt(a);if(i.attrName=c,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,xe("uponSanitizeAttribute",e,i),n=i.attrValue,!i.forceKeepAttr&&(he(a,e),i.keepAttr))if(Et(/\/>/i,n))he(a,e);else if(G&&(n=St(n,R," "),n=St(n,_," ")),Te(e.nodeName.toLowerCase(),c,n))try{l?e.setAttributeNS(l,a,n):e.setAttribute(a,n),bt(s.removed)}catch(e){}}xe("afterSanitizeAttributes",e,null)}}At(me,zt);var Ce="http://www.w3.org/1998/Math/MathML",ke="http://www.w3.org/2000/svg",Ee="http://www.w3.org/1999/xhtml";return s.sanitize=function(e,t){var n,o=void 0,r=void 0,i=void 0;if("string"!=typeof(e=e||"\x3c!--\x3e")&&!be(e)){if("function"!=typeof e.toString)throw Dt("toString is not a function");if("string"!=typeof(e=e.toString()))throw Dt("dirty is not a string, aborting")}if(!s.isSupported){if("object"===Kt(l.toStaticHTML)||"function"==typeof l.toStaticHTML){if("string"==typeof e)return l.toStaticHTML(e);if(be(e))return l.toStaticHTML(e.outerHTML)}return e}if(K||N(t),s.removed=[],!(oe="string"==typeof e?!1:oe))if(e instanceof d)1===(t=(o=ve("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?o=t:o.appendChild(t);else{if(!Q&&!G&&!Y&&-1===e.indexOf("<"))return x&&ee?x.createHTML(e):e;if(!(o=ve(e)))return Q?null:w}o&&X&&ge(o.firstChild);for(var a=ye(oe?e:o);n=a.nextNode();)3===n.nodeType&&n===r||we(n)||(n.content instanceof u&&function e(t){var n,o=ye(t);for(xe("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)xe("uponSanitizeShadowNode",n,null),we(n)||(n.content instanceof u&&e(n.content),Se(n));xe("afterSanitizeShadowDOM",t,null)}(n.content),Se(n),r=n);if(r=null,oe)return e;if(Q){if(Z)for(i=k.call(o.ownerDocument);o.firstChild;)i.appendChild(o.firstChild);else i=o;return J?E.call(c,i,!0):i}return e=Y?o.outerHTML:o.innerHTML,G&&(e=St(e,R," "),e=St(e,_," ")),x&&ee?x.createHTML(e):e},s.setConfig=function(e){N(e),K=!0},s.clearConfig=function(){se=null,K=!1},s.isValidAttribute=function(e,t,n){return se||N({}),Te(e=wt(e),t=wt(t),n)},s.addHook=function(e,t){"function"==typeof t&&(A[e]=A[e]||[],xt(A[e],t))},s.removeHook=function(e){A[e]&&bt(A[e])},s.removeHooks=function(e){A[e]&&(A[e]=[])},s.removeAllHooks=function(){A={}},s}(),Zt=window,Jt=document,en=/^image\/(p?jpe?g|gif|png|bmp)$/i;function tn(r,e){var a,x,u,i,l,f,d,c,o,s,p,t,m,g,h,v,y,b,n,w,T,S,C,k,E,D,A,N,M,R,_,F,O,H,z,L,I,B,P,j,U,W,V,q,$,G,Y,K,X,Q,Z,J,ee,te,ne,oe,re,ie,ae,le,ce=this,se={},ue=[],de=[],fe={},pe={},me={};ce.commands=we(!0,{},e.commands||ft);var ge=ce.opts=we(!0,{},ct,e);ce.opts.emoticons=e.emoticons||ct.emoticons,Array.isArray(ge.allowedIframeUrls)||(ge.allowedIframeUrls=[]),ge.allowedIframeUrls.push("https://www.youtube-nocookie.com/embed/");var he=Qt();function ve(e){return he.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["allowfullscreen","frameborder","target"]})}he.addHook("uponSanitizeElement",function(e,t){var n=ge.allowedIframeUrls;if("iframe"===t.tagName){for(var o=He(e,"src")||"",r=0;r<n.length;r++){var i=n[r];if(ye(i)&&o.substr(0,i.length)===i)return;if(i.test&&i.test(o))return}Ne(e)}}),he.addHook("afterSanitizeAttributes",function(e){"target"in e&&He(e,"data-sce-target",He(e,"target")),ze(e,"target")}),e=function(){r._sceditor=ce,ge.locale&&"en"!==ge.locale&&R(),We(x=Ee("div",{className:"sceditor-container"}),r),Pe(x,"z-index",ge.zIndex),n=r.required,r.required=!1;var e=tn.formats[ge.format];"init"in(a=e?new e:{})&&a.init.call(ce),M(),z(),_(),N(),F(),O(),ht||ce.toggleSourceMode(),Y();var t=function(){Oe(Zt,"load",t),ge.autofocus&&J(),le(),X(),g.call("ready"),"onReady"in a&&a.onReady.call(ce)};Fe(Zt,"load",t),"complete"===Jt.readyState&&t()},M=function(){var e=(e=ge.plugins)?e.toString().split(","):[];g=new pt(ce),e.forEach(function(e){g.register(e.trim())})},R=function(){var e;(t=tn.locale[ge.locale])||(e=ge.locale.split("-"),t=tn.locale[e[0]]),t&&t.dateFormat&&(ge.dateFormat=t.dateFormat)},N=function(){c=Ee("textarea"),i=Ee("iframe",{frameborder:0,allowfullscreen:!0}),ge.startInSourceMode?(qe(x,"sourceMode"),Le(i)):(qe(x,"wysiwygMode"),Le(c)),ge.spellcheck||He(x,"spellcheck","false"),"https:"===Zt.location.protocol&&He(i,"src","about:blank"),Me(x,i),Me(x,c),ce.dimensions(ge.width||Ye(r),ge.height||Ke(r));var e=gt?" ios":"";(d=i.contentDocument).open(),d.write(dt("html",{attrs:' class="'+e+'"',spellcheck:ge.spellcheck?"":'spellcheck="false"',charset:ge.charset,style:ge.style})),d.close(),f=d.body,l=i.contentWindow,ce.readOnly(!!ge.readOnly),gt&&(Ke(f,"100%"),Fe(f,"touchend",ce.focus)),e=He(r,"tabindex"),He(c,"tabindex",e),He(i,"tabindex",e),m=new mt(l,null,ve),Le(r),ce.val(r.value),(e=ge.placeholder||He(r,"placeholder"))&&(c.placeholder=e,He(f,"placeholder",e))},F=function(){ge.autoUpdate&&(Fe(f,"blur",ae),Fe(c,"blur",ae)),null===ge.rtl&&(ge.rtl="rtl"===Pe(c,"direction")),ce.rtl(!!ge.rtl),ge.autoExpand&&(Fe(f,"load",le,_e),Fe(f,"input keyup",le)),ge.resizeEnabled&&H(),He(x,"id",ge.id),ce.emoticons(ge.emoticonsEnabled)},O=function(){var e=r.form,t="compositionstart compositionend",n="keydown keyup keypress focus blur contextmenu",o="onselectionchange"in d?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";Fe(Jt,"click",$),e&&(Fe(e,"reset",U),Fe(e,"submit",ce.updateOriginal,_e)),Fe(f,"keypress",j),Fe(f,"keydown",B),Fe(f,"keydown",P),Fe(f,"keyup",X),Fe(f,"blur",re),Fe(f,"keyup",ie),Fe(f,"paste",L),Fe(f,t,V),Fe(f,o,Q),Fe(f,n,q),ge.emoticonsCompat&&Zt.getSelection&&Fe(f,"keyup",te),Fe(f,"blur",function(){ce.val()||qe(f,"placeholder")}),Fe(f,"focus",function(){$e(f,"placeholder")}),Fe(c,"blur",re),Fe(c,"keyup",ie),Fe(c,"keydown",B),Fe(c,t,V),Fe(c,n,q),Fe(d,"mousedown",W),Fe(d,o,Q),Fe(d,"keyup",X),Fe(x,"selectionchanged",Z),Fe(x,"selectionchanged",Y),Fe(x,"selectionchanged valuechanged nodechanged pasteraw paste",q)},_=function(){var i,a=ce.commands,l=(ge.toolbarExclude||"").split(","),e=ge.toolbar.split("|");u=Ee("div",{className:"sceditor-toolbar",unselectable:"on"}),ge.icons in tn.icons&&(E=new tn.icons[ge.icons]),Se(e,function(e,t){i=Ee("div",{className:"sceditor-group"}),Se(t.split(","),function(e,t){var n,o,r=a[t];!r||-1<l.indexOf(t)||(n=r.shortcut,o=dt("toolbarButton",{name:t,dispName:ce._(r.name||r.tooltip||t)},!0).firstChild,E&&E.create&&E.create(t)&&(We(E.create(t),o.firstChild),qe(o,"has-icon")),o._sceTxtMode=!!r.txtExec,o._sceWysiwygMode=!!r.exec,Ge(o,"disabled",!r.exec),Fe(o,"click",function(e){Ve(o,"disabled")||A(o,r),Y(),e.preventDefault()}),Fe(o,"mousedown",function(e){ce.closeDropDown(),e.preventDefault()}),r.tooltip&&He(o,"title",ce._(r.tooltip)+(n?" ("+n+")":"")),n&&ce.addShortcut(n,t),r.state?de.push({name:t,state:r.state}):ye(r.exec)&&de.push({name:t,state:r.exec}),Me(i,o),pe[t]=o)}),i.firstChild&&Me(u,i)}),Me(ge.toolbarContainer||x,u)},H=function(){function t(e){o="touchmove"===e.type?(e=Zt.event,c=e.changedTouches[0].pageX,e.changedTouches[0].pageY):(c=e.pageX,e.pageY);var t=u+(o-l),n=m?s-(c-a):s+(c-a);0<y&&y<n&&(n=y),0<v&&n<v&&(n=v),ge.resizeWidth||(n=!1),0<h&&h<t&&(t=h),0<g&&t<g&&(t=g),ge.resizeHeight||(t=!1),(n||t)&&ce.dimensions(n,t),e.preventDefault()}var o,e=Ee("div",{className:"sceditor-grip"}),n=Ee("div",{className:"sceditor-resize-cover"}),r="touchmove mousemove",i="touchcancel touchend mouseup",a=0,l=0,c=0,s=0,u=0,d=Ye(x),f=Ke(x),p=!1,m=ce.rtl(),g=ge.resizeMinHeight||f/1.5,h=ge.resizeMaxHeight||2.5*f,v=ge.resizeMinWidth||d/1.25,y=ge.resizeMaxWidth||1.25*d,b=function(e){p&&(p=!1,Le(n),$e(x,"resizing"),Oe(Jt,r,t),Oe(Jt,i,b),e.preventDefault())};E&&E.create&&(d=E.create("grip"))&&(Me(e,d),qe(e,"has-icon")),Me(x,e),Me(x,n),Le(n),Fe(e,"touchstart mousedown",function(e){l="touchstart"===e.type?(e=Zt.event,a=e.touches[0].pageX,e.touches[0].pageY):(a=e.pageX,e.pageY),s=Ye(x),u=Ke(x),p=!0,qe(x,"resizing"),Ie(n),Fe(Jt,r,t),Fe(Jt,i,b),e.preventDefault()})},z=function(){var e=ge.emoticons,n=ge.emoticonsRoot||"";Se(me=e?we({},e.more,e.dropdown,e.hidden):me,function(e,t){me[e]=dt("emoticon",{key:e,url:n+(t.url||t),tooltip:t.tooltip||e}),ge.emoticonsEnabled&&ue.push(Ee("img",{src:n+(t.url||t)}))})},J=function(){var e,t=f.firstChild,n=!!ge.autofocusEnd;if(Qe(x)){if(ce.sourceMode())return e=n?c.value.length:0,void c.setSelectionRange(e,e);if(at(f),n)for((t=f.lastChild)||(t=Ee("p",{},d),Me(f,t));t.lastChild;)Ue(t=t.lastChild,"br")&&t.previousSibling&&(t=t.previousSibling);e=d.createRange(),ot(t)?e.selectNodeContents(t):(e.setStartBefore(t),n&&e.setStartAfter(t)),e.collapse(!n),m.selectRange(e),y=e,n&&(f.scrollTop=f.scrollHeight),ce.focus()}},ce.readOnly=function(e){return"boolean"!=typeof e?!c.readonly:(f.contentEditable=!e,c.readonly=!e,G(e),ce)},ce.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===He(c,"dir"):(He(f,"dir",t),He(c,"dir",t),$e(x,"rtl"),$e(x,"ltr"),qe(x,t),E&&E.rtl&&E.rtl(e),ce)},G=function(n){var o=ce.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";Se(pe,function(e,t){Ge(t,"disabled",n||!t[o])})},ce.width=function(e,t){return e||0===e?(ce.dimensions(e,null,t),ce):Ye(x)},ce.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:ce.width(),height:ce.height()}:(!1!==e&&(!1!==n&&(ge.width=e),Ye(x,e)),!1!==t&&(!1!==n&&(ge.height=t),Ke(x,t)),ce)},ce.height=function(e,t){return e||0===e?(ce.dimensions(null,e,t),ce):Ke(x)},ce.maximize=function(e){var t="sceditor-maximize";return be(e)?Ve(x,t):((e=!!e)&&(C=Zt.pageYOffset),Ge(Jt.documentElement,t,e),Ge(Jt.body,t,e),Ge(x,t,e),ce.width(e?"100%":ge.width,!1),ce.height(e?"100%":ge.height,!1),e||Zt.scrollTo(0,C),le(),ce)},le=function(){ge.autoExpand&&!S&&(S=setTimeout(ce.expandToContent,200))},ce.expandToContent=function(e){var t,n;ce.maximize()||(clearTimeout(S),S=!1,T||(t=ge.resizeMinHeight||ge.height||Ke(r),T={min:t,max:ge.resizeMaxHeight||2*t}),(n=Jt.createRange()).selectNodeContents(f),t=n.getBoundingClientRect(),n=d.documentElement.clientHeight-1,t=t.bottom-t.top,n=ce.height()+1+(t-n),e||-1===T.max||(n=Math.min(n,T.max)),ce.height(Math.ceil(Math.max(n,T.min))))},ce.destroy=function(){var e;g&&(g.destroy(),g=m=null,o&&Ne(o),Oe(Jt,"click",$),(e=r.form)&&(Oe(e,"reset",U),Oe(e,"submit",ce.updateOriginal)),Ne(c),Ne(u),Ne(x),delete r._sceditor,Ie(r),r.required=n)},ce.createDropDown=function(e,t,n){t="sceditor-"+t,ce.closeDropDown(),o&&Ve(o,t)||(e=we({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},ge.dropDownCss),Pe(o=Ee("div",{className:"sceditor-dropdown "+t}),e),Me(o,n),Me(x,o),Fe(o,"click focusin",function(e){e.stopPropagation()}),!o||(n=Re(o,"input,textarea")[0])&&n.focus())},$=function(e){3!==e.which&&o&&!e.defaultPrevented&&(ae(),ce.closeDropDown())},L=function(e){var t,n,o=f,r=e.clipboardData;if(r){var i={},a=r.types,l=r.items;e.preventDefault();for(var c=0;c<a.length;c++){if(Zt.FileReader&&l&&en.test(l[c].type))return t=r.items[c].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){I({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);i[a[c]]=r.getData(a[c])}i.text=i["text/plain"],i.html=ve(i["text/html"]),I(i)}else if(!k){var s=o.scrollTop;for(m.saveRange(),k=Jt.createDocumentFragment();o.firstChild;)Me(k,o.firstChild);setTimeout(function(){var e=o.innerHTML;o.innerHTML="",Me(o,k),o.scrollTop=s,k=!1,m.restoreRange(),I({html:ve(e)})},0)}},I=function(e){var t=Ee("div",{},d);g.call("pasteRaw",e),Xe(x,"pasteraw",e),e.html?(t.innerHTML=ve(e.html),it(t)):t.innerHTML=ut(e.text||""),t={val:t.innerHTML},"fragmentToSource"in a&&(t.val=a.fragmentToSource(t.val,d,h)),g.call("paste",t),Xe(x,"paste",t),"fragmentToHtml"in a&&(t.val=a.fragmentToHtml(t.val,h)),g.call("pasteHtml",t),ce.wysiwygEditorInsertHtml(t.val,null,!0)},ce.closeDropDown=function(e){o&&(Ne(o),o=null),!0===e&&ce.focus()},ce.wysiwygEditorInsertHtml=function(e,t,n){var o=Ke(i);ce.focus(),!n&&Ae(v,"code")||(m.insertHTML(e,t),m.saveRange(),D(),Ie(n=Re(f,"#sceditor-end-marker")[0]),e=f.scrollTop,t=lt(n).top+1.5*n.offsetHeight-o,Le(n),(e<t||t+o<e)&&(f.scrollTop=t),oe(!1),m.restoreRange(),X())},ce.wysiwygEditorInsertText=function(e,t){ce.wysiwygEditorInsertHtml(ut(e),ut(t))},ce.insertText=function(e,t){return ce.inSourceMode()?ce.sourceEditorInsertText(e,t):ce.wysiwygEditorInsertText(e,t),ce},ce.sourceEditorInsertText=function(e,t){var n,o=c.selectionStart,r=c.selectionEnd,i=c.scrollTop;c.focus(),n=c.value,t&&(e+=n.substring(o,r)+t),c.value=n.substring(0,o)+e+n.substring(r,n.length),c.selectionStart=o+e.length-(t?t.length:0),c.selectionEnd=c.selectionStart,c.scrollTop=i,c.focus(),oe()},ce.getRangeHelper=function(){return m},ce.sourceEditorCaret=function(e){return c.focus(),e?(c.selectionStart=e.start,c.selectionEnd=e.end,this):{start:c.selectionStart,end:c.selectionEnd}},ce.val=function(e,t){return ye(e)?(ce.inSourceMode()?ce.setSourceEditorValue(e):(!1!==t&&"toHtml"in a&&(e=a.toHtml(e)),ce.setWysiwygEditorValue(e)),ce):ce.inSourceMode()?ce.getSourceEditorValue(!1):ce.getWysiwygEditorValue(t)},ce.insert=function(e,t,n,o,r){return ce.inSourceMode()?ce.sourceEditorInsertText(e,t):(t&&(i=m.selectedHtml(),e+=(i=!1!==n&&"fragmentToSource"in a?a.fragmentToSource(i,d,h):i)+t),!1!==n&&"fragmentToHtml"in a&&(e=a.fragmentToHtml(e,h)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),ce.wysiwygEditorInsertHtml(e)),ce;var i},ce.getWysiwygEditorValue=function(e){for(var t,n=Ee("div",{},d),o=f.childNodes,r=0;r<o.length;r++)Me(n,o[r].cloneNode(!0));return Me(f,n),it(n),Ne(n),t=n.innerHTML,!1!==e&&a.hasOwnProperty("toSource")?a.toSource(t,d):t},ce.getBody=function(){return f},ce.getContentAreaContainer=function(){return i},ce.getSourceEditorValue=function(e){var t=c.value;return!1!==e&&"toHtml"in a?a.toHtml(t):t},ce.setWysiwygEditorValue=function(e){e=e||"<p><br /></p>",f.innerHTML=ve(e),D(),X(),oe(),le()},ce.setSourceEditorValue=function(e){c.value=e,oe()},ce.updateOriginal=function(){r.value=ce.val()},D=function(){var e,l,c,s,t,u,d;ge.emoticonsEnabled&&(e=f,l=me,c=ge.emoticonsCompat,s=e.ownerDocument,t="(^|\\s| | | | |$)",u=[],d={},De(e,"code")||(Se(l,function(e){d[e]=new RegExp(t+st(e)+t),u.push(e)}),u.sort(function(e,t){return t.length-e.length}),function e(t){for(t=t.firstChild;t;){if(t.nodeType!==Ce||Ue(t,"code")||e(t),t.nodeType===ke)for(var n=0;n<u.length;n++){var o,r=t.nodeValue,i=u[n],a=c?r.search(d[i]):r.indexOf(i);-1<a&&(o=r.indexOf(i,a),a=et(l[i],s),i=r.substr(o+i.length),a.appendChild(s.createTextNode(i)),t.nodeValue=r.substr(0,o),t.parentNode.insertBefore(a,t.nextSibling))}t=t.nextSibling}}(e)))},ce.inSourceMode=function(){return Ve(x,"sourceMode")},ce.sourceMode=function(e){var t=ce.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&ce.toggleSourceMode(),ce)},ce.toggleSourceMode=function(){var e=ce.inSourceMode();!ht&&e||(e||(m.saveRange(),m.clear()),ce.blur(),e?ce.setWysiwygEditorValue(ce.getSourceEditorValue()):ce.setSourceEditorValue(ce.getWysiwygEditorValue()),Be(c),Be(i),Ge(x,"wysiwygMode",e),Ge(x,"sourceMode",!e),G(),Y())},K=function(){return c.focus(),c.value.substring(c.selectionStart,c.selectionEnd)},A=function(e,t){ce.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?ce.sourceEditorInsertText.apply(ce,t.txtExec):t.txtExec.call(ce,e,K())):t.exec&&(xe(t.exec)?t.exec.call(ce,e):ce.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},ce.execCommand=function(e,t){var n=!1,o=ce.commands[e];if(ce.focus(),!Ae(m.parentNode(),"code")){try{n=d.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(ce._(o.errorMessage)),Y()}},Q=function(){function e(){if(l.getSelection()&&l.getSelection().rangeCount<=0)y=null;else if(m&&!m.compare(y)){if((y=m.cloneSelected())&&y.collapsed){var e=y.startContainer,t=y.startOffset;for(t&&e.nodeType!==ke&&(e=e.childNodes[t]);e&&e.parentNode!==f;)e=e.parentNode;e&&rt(e,!0)&&(m.saveRange(),n=d,Ze(f,function(e){rt(e,!0)?(o||We(o=Ee("p",{},n),e),e.nodeType===ke&&""===e.nodeValue||Me(o,e)):o=null},!1,!0),m.restoreRange())}Xe(x,"selectionchanged")}var n,o;b=!1}b||(b=!0,"onselectionchange"in d?e():setTimeout(e,100))},Z=function(){var e,t=m.parentNode();h!==t&&(e=h,h=t,v=m.getFirstBlockParent(t),Xe(x,"nodechanged",{oldNode:e,newNode:h}))},ce.currentNode=function(){return h},ce.currentBlockNode=function(){return v},Y=function(){var e,t,n="active",o=d,r=ce.sourceMode();if(ce.readOnly())Se(Re(u,n),function(e,t){$e(t,n)});else{r||(t=m.parentNode(),e=m.getFirstBlockParent(t));for(var i=0;i<de.length;i++){var a=0,l=pe[de[i].name],c=de[i].state,s=r&&!l._sceTxtMode||!r&&!l._sceWysiwygMode;if(ye(c)){if(!r)try{-1<(a=o.queryCommandEnabled(c)?0:-1)&&(a=o.queryCommandState(c)?1:0)}catch(e){}}else s||(a=c.call(ce,t,e));Ge(l,"disabled",s||a<0),Ge(l,n,0<a)}E&&E.update&&E.update(r,t,e)}},j=function(e){var t,n,o;e.defaultPrevented||(ce.closeDropDown(),13!==e.which||!Ue(v,"li,ul,ol")&&tt(v)&&(t=Ee("br",{},d),m.insertNode(t),(o=(n=t.parentNode).lastChild)&&o.nodeType===ke&&""===o.nodeValue&&(Ne(o),o=n.lastChild),!rt(n,!0)&&o===t&&rt(t.previousSibling)&&m.insertHTML("<br>"),e.preventDefault()))},X=function(){Je(f,function(e){if(e.nodeType===Ce&&!/inline/.test(Pe(e,"display"))&&!Ue(e,".sceditor-nlf")&&tt(e)){var t=Ee("p",{},d);return t.className="sceditor-nlf",t.innerHTML="<br />",Me(f,t),!1}if(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||Ue(e,"br"))return!1})},U=function(){ce.val(r.value)},W=function(){ce.closeDropDown()},ce._=function(){var n=arguments;return t&&t[n[0]]&&(n[0]=t[n[0]]),n[0].replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:"{"+t+"}"})},q=function(t){g&&g.call(t.type+"Event",t,ce);var e=(t.target===c?"scesrc":"scewys")+t.type;se[e]&&se[e].forEach(function(e){e.call(ce,t)})},ce.bind=function(e,t,n,o){for(var r,i,a=(e=e.split(" ")).length;a--;)xe(t)&&(r="scewys"+e[a],i="scesrc"+e[a],n||(se[r]=se[r]||[],se[r].push(t)),o||(se[i]=se[i]||[],se[i].push(t)),"valuechanged"===e[a]&&(oe.hasHandler=!0));return ce},ce.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)xe(t)&&(n||Te(se["scewys"+e[r]]||[],t),o||Te(se["scesrc"+e[r]]||[],t));return ce},ce.blur=function(e,t,n){return xe(e)?ce.bind("blur",e,t,n):(ce.sourceMode()?c:f).blur(),ce},ce.focus=function(e,t,n){if(xe(e))ce.bind("focus",e,t,n);else if(ce.inSourceMode())c.focus();else{if(Re(d,":focus").length)return;var o,n=m.selectedRange();y||J(),n&&1===n.endOffset&&n.collapsed&&(o=n.endContainer)&&1===o.childNodes.length&&Ue(o.firstChild,"br")&&(n.setStartBefore(o.firstChild),n.collapse(!0),m.selectRange(n)),l.focus(),f.focus()}return Y(),ce},ce.keyDown=function(e,t,n){return ce.bind("keydown",e,t,n)},ce.keyPress=function(e,t,n){return ce.bind("keypress",e,t,n)},ce.keyUp=function(e,t,n){return ce.bind("keyup",e,t,n)},ce.nodeChanged=function(e){return ce.bind("nodechanged",e,!1,!0)},ce.selectionChanged=function(e){return ce.bind("selectionchanged",e,!1,!0)},ce.valueChanged=function(e,t,n){return ce.bind("valuechanged",e,t,n)},ee=function(e){var n=0,o=ce.emoticonsCache,t=String.fromCharCode(e.which);Ae(v,"code")||(o||(o=[],Se(me,function(e,t){o[n++]=[e,t]}),o.sort(function(e,t){return e[0].length-t[0].length}),ce.emoticonsCache=o,ce.longestEmoticonCode=o[o.length-1][0].length),m.replaceKeyword(ce.emoticonsCache,!0,!0,ce.longestEmoticonCode,ge.emoticonsCompat,t)&&(ge.emoticonsCompat&&/^\s$/.test(t)||e.preventDefault()))},te=function(){!function(e,t){var n=/[^\s\xA0\u2002\u2003\u2009]+/,o=e&&Re(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var r=0;r<o.length;r++){var i,a,l,c,s=o[r],u=s.parentNode,d=s.previousSibling,f=s.nextSibling;(d&&n.test(d.nodeValue.slice(-1))||f&&n.test((f.nodeValue||"")[0]))&&(a=-1,l=(i=t.cloneSelected()).startContainer,c=d.nodeValue||"",c+=je(s,"sceditor-emoticon"),l===f&&(a=c.length+i.startOffset),l===e&&e.childNodes[i.startOffset]===f&&(a=c.length),l===d&&(a=i.startOffset),(f=f&&f.nodeType===ke?f:u.insertBefore(u.ownerDocument.createTextNode(""),f)).insertData(0,c),Ne(d),Ne(s),-1<a&&(i.setStart(f,a),i.collapse(!0),t.selectRange(i)))}}(v,m)},ce.emoticons=function(e){return e||!1===e?((ge.emoticonsEnabled=e)?(Fe(f,"keypress",ee),ce.sourceMode()||(m.saveRange(),D(),oe(!1),m.restoreRange())):(Se(Re(f,"img[data-sceditor-emoticon]"),function(e,t){var n=je(t,"sceditor-emoticon"),n=d.createTextNode(n);t.parentNode.replaceChild(n,t)}),Oe(f,"keypress",ee),oe()),ce):ge.emoticonsEnabled},ce.css=function(e){return w||(w=Ee("style",{id:"inline"},d),Me(d.head,w)),ye(e)?(w.styleSheet?w.styleSheet.cssText=e:w.innerHTML=e,ce):w.styleSheet?w.styleSheet.cssText:w.innerHTML},B=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(r<16||18<r)&&t.push(i),t=t.join("+"),fe[t]&&!1===fe[t].call(ce)&&(e.stopPropagation(),e.preventDefault())},ce.addShortcut=function(e,t){return e=e.toLowerCase(),ye(t)?fe[e]=function(){return A(pe[t],ce.commands[t]),!1}:fe[e]=t,ce},ce.removeShortcut=function(e){return delete fe[e.toLowerCase()],ce},P=function(e){var t,n,o;if(!ge.disableBlockRemove&&8===e.which&&(n=m.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=ne())&&!Ue(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==ke||t.nodeValue)return;if(!(t=t.parentNode))return}ce.clearBlockFormatting(o),e.preventDefault()}},ne=function(){for(var e=v;!tt(e)||rt(e,!0);)if(!(e=e.parentNode)||Ue(e,"body"))return;return e},ce.clearBlockFormatting=function(e){return!(e=e||ne())||Ue(e,"body")||(m.saveRange(),e.className="",He(e,"style",""),Ue(e,"p,div,td")||nt(e,"p"),m.restoreRange()),ce},oe=function(e){var t,n,o;g&&(g.hasHandler("valuechangedEvent")||oe.hasHandler)&&(o=!(n=ce.sourceMode())&&m.hasSelection(),e=(s=!1)!==e&&!d.getElementById("sceditor-start-marker"),p&&(clearTimeout(p),p=!1),o&&e&&m.saveRange(),(t=n?c.value:f.innerHTML)!==oe.lastVal&&(oe.lastVal=t,Xe(x,"valuechanged",{rawValue:n?ce.val():t})),o&&e&&m.removeMarkers())},re=function(){p&&oe()},ie=function(e){var t=e.which,e=13===(n=ie.lastChar)||32===n,n=8===n||46===n;ie.lastChar=t,s||(13===t||32===t?e?ie.triggerNext=!0:oe():8===t||46===t?n?ie.triggerNext=!0:oe():ie.triggerNext&&(oe(),ie.triggerNext=!1),clearTimeout(p),p=setTimeout(function(){s||oe()},1500))},V=function(e){(s=/start/i.test(e.type))||oe()},ae=function(){ce.updateOriginal()},e()}tn.locale={},tn.formats={},tn.icons={},tn.command={get:function(e){return ft[e]||null},set:function(e,t){return!(!e||!t)&&((t=we(ft[e]||{},t)).remove=function(){tn.command.remove(e)},ft[e]=t,this)},remove:function(e){return ft[e]&&delete ft[e],this}},window.sceditor={command:tn.command,commands:ft,defaultOptions:ct,ios:gt,isWysiwygSupported:ht,regexEscape:st,escapeEntities:ut,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!p.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:Pe,attr:He,removeAttr:ze,is:Ue,closest:Ae,width:Ye,height:Ke,traverse:Ze,rTraverse:Je,parseHTML:et,hasStyling:tt,convertElement:nt,blockLevelList:c,canHaveChildren:ot,isInline:rt,copyCSS:s,fixNesting:it,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if(e!==t&&e.contains&&e.contains(t))return e},getSibling:u,removeWhiteSpace:at,extractContents:d,getOffset:lt,getStyle:f,hasStyle:function(e,t,n){return!!(t=f(e,t))&&(!n||t===n||Array.isArray(n)&&-1<n.indexOf(t))}},locale:tn.locale,icons:tn.icons,utils:{each:Se,isEmptyObject:t,extend:we},plugins:pt.plugins,formats:tn.formats,create:function(e,t){t=t||{},De(e,".sceditor-container")||(t.runWithoutWysiwygSupport||ht)&&new tn(e,t)},instance:function(e){return e._sceditor}},o.default.sceditor=window.sceditor,o.default.fn.sceditor=function(e){var t,n=[];return this.each(function(){t=this._sceditor,"state"===e?n.push(!!t):"instance"===e?n.push(t):t||o.default.sceditor.create(this,e)}),n.length?1===n.length?n[0]:n:this}}(),function(y){"use strict";var b=y.dom,e=y.utils,x=b.css,o=b.attr,w=b.is,T=b.removeAttr,t=b.convertElement,i=e.extend,a=e.each,S=e.isEmptyObject,l=y.command.get,c={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration:underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration:line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align:left;">',"</div>"]},center:{txtExec:['<div style="text-align:center;">',"</div>"]},right:{txtExec:['<div style="text-align:right;">',"</div>"]},justify:{txtExec:['<div style="text-align:justify;">',"</div>"]},font:{txtExec:function(e){var t=this;l("font")._dropDown(t,e,function(e){t.insertText('<span style="font-family:'+e+';">',"</span>")})}},size:{txtExec:function(e){var t=this;l("size")._dropDown(t,e,function(e){t.insertText('<span style="font-size:'+e+';">',"</span>")})}},color:{txtExec:function(e){var t=this;l("color")._dropDown(t,e,function(e){t.insertText('<span style="color:'+e+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(e,t){var r=this;l("image")._dropDown(r,e,t,function(e,t,n){var o="";t&&(o+=' width="'+t+'"'),n&&(o+=' height="'+n+'"'),r.insertText("<img"+o+' src="'+e+'" />')})}},email:{txtExec:function(e,n){var o=this;l("email")._dropDown(o,e,function(e,t){o.insertText('<a href="mailto:'+e+'">'+(t||n||e)+"</a>")})}},link:{txtExec:function(e,n){var o=this;l("link")._dropDown(o,e,function(e,t){o.insertText('<a href="'+e+'">'+(t||n||e)+"</a>")})}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(e){var n=this;l("youtube")._dropDown(n,e,function(e,t){n.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque&start='+t+'" data-youtube-id="'+e+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction:rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction:ltr;">',"</div>"]}};function C(){var r=this,n={},g={};function e(e,t,n){var p,o,r,i,a,l,c,s,u,d,f,m=n.createElement("div");return m.innerHTML=t,x(m,"visibility","hidden"),n.body.appendChild(m),t=m,b.traverse(t,function(e){var t=e.nodeName.toLowerCase();h("*",e),h(t,e)},!0),p=m,b.traverse(p,function(e){var t,n=e.nodeName.toLowerCase(),o=e.parentNode,r=e.nodeType,i=!b.isInline(e),a=e.previousSibling,l=e.nextSibling,c="iframe"!==n&&function e(t,n){var o=t.childNodes,r=t.nodeName.toLowerCase(),i=t.nodeValue,a=o.length,l=C.allowedEmptyTags||[];if(n&&"br"===r)return!0;if(w(t,".sceditor-ignore"))return!0;if(-1<l.indexOf(r)||"td"===r||!b.canHaveChildren(t))return!1;if(i&&/\S|\u00A0/.test(i))return!1;for(;a--;)if(!e(o[a],n&&!t.previousSibling&&!t.nextSibling))return!1;if(t.getBoundingClientRect&&(t.className||t.hasAttributes("style")))return!(i=t.getBoundingClientRect()).width||!i.height;return!0}(e,o===p&&(!a&&!l)&&"br"!==n),s=e.ownerDocument,u=C.allowedTags,d=e.firstChild,f=C.disallowedTags;if(3!==r&&(4===r?n="!cdata":"!"!==n&&8!==r||(n="!comment"),1===r&&w(e,".sceditor-nlf")&&(!d||1===e.childNodes.length&&/br/i.test(d.nodeName)?c=!0:(e.classList.remove("sceditor-nlf"),e.className||T(e,"class"))),c?t=!0:u&&u.length?t=u.indexOf(n)<0:f&&f.length&&(t=-1<f.indexOf(n)),t)){if(!c){for(i&&a&&b.isInline(a)&&o.insertBefore(s.createTextNode(" "),e);e.firstChild;)o.insertBefore(e.firstChild,l);i&&l&&b.isInline(l)&&o.insertBefore(s.createTextNode(" "),l)}o.removeChild(e)}},!0),t=m,u=(s=C.allowedAttribs)&&!S(s),f=(d=C.disallowedAttribs)&&!S(d),g={},b.traverse(t,function(e){if(e.attributes&&(o=e.nodeName.toLowerCase(),a=e.attributes.length))for(g[o]||(g[o]=u?v(s["*"],s[o]):v(d["*"],d[o]));a--;)r=e.attributes[a],i=r.name,l=g[o][i],c=!1,u?c=null!==l&&(!Array.isArray(l)||l.indexOf(r.value)<0):f&&(c=null===l||Array.isArray(l)&&-1<l.indexOf(r.value)),c&&e.removeAttribute(i)}),e||function(e){var t;b.removeWhiteSpace(e);for(var n,o=e.firstChild;o;)n=o.nextSibling,b.isInline(o)&&!w(o,".sceditor-ignore")?(t||(t=e.ownerDocument.createElement("p"),o.parentNode.insertBefore(t,o)),t.appendChild(o)):t=null,o=n}(m),e=(new y.XHTMLSerializer).serialize(m,!0),n.body.removeChild(m),e}function h(e,o){n[e]&&n[e].forEach(function(n){n.tags[e]?a(n.tags[e],function(e,t){o.getAttributeNode&&(!(e=o.getAttributeNode(e))||t&&t.indexOf(e.value)<0||n.conv.call(r,o))}):n.conv&&n.conv.call(r,o)})}function v(e,t){var n={};return e&&i(n,e),t&&a(t,function(e,t){Array.isArray(t)?n[e]=(n[e]||[]).concat(t):n[e]||(n[e]=null)}),n}r.init=function(){S(C.converters||{})||a(C.converters,function(e,t){a(t.tags,function(e){n[e]||(n[e]=[]),n[e].push(t)})}),this.commands=i(!0,{},c,this.commands)},r.toSource=e.bind(null,!1),r.fragmentToSource=e.bind(null,!0)}y.XHTMLSerializer=function(){var o={indentStr:"\t"},r=[],d=0;function f(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"," ":"&nbsp;"};return e?e.replace(/[&<>"\xa0]/g,function(e){return t[e]||e}):""}function p(t,e){switch(t.nodeType){case 1:!function(e,t){var n,o,r,i=e.nodeName.toLowerCase(),a="iframe"===i,l=e.attributes.length,c=e.firstChild,s=t||/pre(?:\-wrap)?$/i.test(x(e,"whiteSpace")),u=!e.firstChild&&!b.canHaveChildren(e)&&!a;if(!w(e,".sceditor-ignore")){for(m("<"+i,!t&&g(e));l--;)o=e.attributes[l],r=o.value,m(" "+o.name.toLowerCase()+'="'+f(r)+'"',!1);for(m(u?" />":">",!1),a||(n=c);n;)d++,p(n,s),n=n.nextSibling,d--;u||m("</"+i+">",!s&&!a&&g(e)&&c&&g(c))}}(t,e);break;case 3:o=e,r=(n=t).nodeValue,!void((r=!o?r.replace(/[\r\n]/," ").replace(/[^\S|\u00A0]+/g," "):r)&&m(f(r),!o&&g(n)));break;case 4:m("<![CDATA["+f(t.nodeValue)+"]]>");break;case 8:m("\x3c!-- "+f(t.nodeValue)+" --\x3e");break;case 9:case 11:!function(){for(var e=t.firstChild;e;)p(e),e=e.nextSibling}()}var n,o,r}function m(e,t){var n=d;if(!1!==t)for(r.length&&r.push("\n");n--;)r.push(o.indentStr);r.push(e)}function g(e){var t=e.previousSibling;return 1!==e.nodeType&&t?!b.isInline(t):!t&&!b.isInline(e.parentNode)||!b.isInline(e)}this.serialize=function(e,t){if(r=[],t)for(e=e.firstChild;e;)p(e),e=e.nextSibling;else p(e);return r.join("")}},C.converters=[{tags:{"*":{width:null}},conv:function(e){x(e,"width",o(e,"width")),T(e,"width")}},{tags:{"*":{height:null}},conv:function(e){x(e,"height",o(e,"height")),T(e,"height")}},{tags:{li:{value:null}},conv:function(e){T(e,"value")}},{tags:{"*":{text:null}},conv:function(e){x(e,"color",o(e,"text")),T(e,"text")}},{tags:{"*":{color:null}},conv:function(e){x(e,"color",o(e,"color")),T(e,"color")}},{tags:{"*":{face:null}},conv:function(e){x(e,"fontFamily",o(e,"face")),T(e,"face")}},{tags:{"*":{align:null}},conv:function(e){x(e,"textAlign",o(e,"align")),T(e,"align")}},{tags:{"*":{border:null}},conv:function(e){x(e,"borderWidth",o(e,"border")),T(e,"border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(e){o(e,"id")||o(e,"id",o(e,"name")),T(e,"name")}},{tags:{"*":{vspace:null}},conv:function(e){x(e,"marginTop",+o(e,"vspace")),x(e,"marginBottom",+o(e,"vspace")),T(e,"vspace")}},{tags:{"*":{hspace:null}},conv:function(e){x(e,"marginLeft",+o(e,"hspace")),x(e,"marginRight",+o(e,"hspace")),T(e,"hspace")}},{tags:{hr:{noshade:null}},conv:function(e){x(e,"borderStyle","solid"),T(e,"noshade")}},{tags:{"*":{nowrap:null}},conv:function(e){x(e,"whiteSpace","nowrap"),T(e,"nowrap")}},{tags:{big:null},conv:function(e){x(t(e,"span"),"fontSize","larger")}},{tags:{small:null},conv:function(e){x(t(e,"span"),"fontSize","smaller")}},{tags:{b:null},conv:function(e){t(e,"strong")}},{tags:{u:null},conv:function(e){x(t(e,"span"),"textDecoration","underline")}},{tags:{s:null,strike:null},conv:function(e){x(t(e,"span"),"textDecoration","line-through")}},{tags:{dir:null},conv:function(e){t(e,"ul")}},{tags:{center:null},conv:function(e){x(t(e,"div"),"textAlign","center")}},{tags:{font:{size:null}},conv:function(e){x(e,"fontSize",x(e,"fontSize")),T(e,"size")}},{tags:{font:null},conv:function(e){t(e,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(e){T(e,"type")}},{tags:{"*":{_moz_dirty:null}},conv:function(e){T(e,"_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(e){e.parentNode.removeChild(e)}},{tags:{"*":{"data-sce-target":null}},conv:function(e){var t=o(e,"rel")||"",n=o(e,"data-sce-target");"_blank"===n&&w(e,"a")&&(/(^|\s)noopener(\s|$)/.test(t)||o(e,"rel","noopener"+(t?" "+t:"")),o(e,"target",n)),T(e,"data-sce-target")}}],C.allowedAttribs={},C.disallowedAttribs={},C.allowedTags=[],C.disallowedTags=[],C.allowedEmptyTags=[],y.formats.xhtml=C}(sceditor);